{% extends 'base.html' %}
{% load static %}

{% block title %}Premium Formal Shirt{% endblock title %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'css/products/product_detail.css' %}">
{% endblock extra_styles %}

{% block content %}
<div class="product-detail-container">
    
    <div class="product-gallery">
        <div class="gallery-main">
            <img src="{{product.image}}" alt="Premium Formal Shirt" id="main-product-image">
        </div>
        <div class="gallery-thumbnails">
            {% for image in images_list_limited %}
            <img src="{{image.image_url}}" alt="Thumbnail 1" class="thumbnail-img" data-image="{{image.image_url}}">
            {% endfor %}
        </div> 
    </div>

    <div class="product-info">
        <h1>{{product.name}}</h1>
        <p class="price">â‚¹ {{product.price}}</p>
        <p class="description">
            {{prodcut.description}}
        </p>

        <div class="product-options">
            
             <div class="option-group">
                <div class="option-header">
                    <span><strong>Size:</strong></span>
                </div>
                <div class="option-buttons size-buttons">
                    {% for size in sizes %}
                    <button class="btn-size" data-size="size">{{size}}</button>
                    {% endfor %}
                </div>
            </div>

            {% comment %} <div class="option-group">
                <div class="option-header">
                    <span><strong>Color:</strong></span>
                    <span id="selected-color">Blue</span>
                </div>
                <div class="option-buttons color-swatches">
                    <button class="btn-color" data-color="White" style="background-color: #f1f1f1;" aria-label="White"></button>
                    <button class="btn-color active" data-color="Blue" style="background-color: #007bff;" aria-label="Blue"></button>
                    <button class="btn-color" data-color="Black" style="background-color: #222;" aria-label="Black"></button>
                    <button class="btn-color" data-color="Gray" style="background-color: #808080;" aria-label="Gray"></button>
                </div>
            </div> {% endcomment %}


            <div class="option-group">
                <label for="quantity-display" class="quantity-label"><strong>Quantity</strong></label>
                <div class="quantity-selector">
                    <button class="btn-quantity" id="btn-decrease" aria-label="Decrease quantity"><i class='bx bx-minus'></i></button>
                    <span id="quantity-display">1 item</span>
                    <button class="btn-quantity" id="btn-increase" aria-label="Increase quantity"><i class='bx bx-plus'></i></button>
                </div>
            </div>

        </div>

        <div class="action-buttons">
            <button class="btn btn-outline">Add to Cart</button>
            <button class="btn btn-solid">Buy Now</button>
        </div>

        <div class="secondary-actions">
            <a href="#" class="action-link">
                <i class='bx bx-heart'></i>
                <span>Add to Wishlist</span>
            </a>
            <a href="#" class="action-link">
                <i class='bx bx-share' ></i>
                <span>Share</span>
            </a>
        </div>

    </div>
</div>
{% endblock content %}

{% block extra_script %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Thumbnail image switcher
        const mainImage = document.getElementById('main-product-image');
        const thumbnails = document.querySelectorAll('.thumbnail-img');

        thumbnails.forEach(thumb => {
            thumb.addEventListener('click', function() {
                // Update main image source
                mainImage.src = this.dataset.image;
                
                // Update active state for thumbnails
                thumbnails.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            });
        });

        // Size selector
        const sizeButtons = document.querySelectorAll('.btn-size');
        const selectedSize = document.getElementById('selected-size');

        sizeButtons.forEach(button => {
            button.addEventListener('click', function() {
                sizeButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                selectedSize.textContent = this.dataset.size;
            });
        });

        // Color selector
        const colorButtons = document.querySelectorAll('.btn-color');
        const selectedColor = document.getElementById('selected-color');

        colorButtons.forEach(button => {
            button.addEventListener('click', function() {
                colorButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                selectedColor.textContent = this.dataset.color;
            });
        });

        // Quantity selector
            const decreaseBtn = document.getElementById('btn-decrease');
        const increaseBtn = document.getElementById('btn-increase');
        const quantityDisplay = document.getElementById('quantity-display');
        let quantity = 1;
        const maxQuantity = 5; // Maximum allowed per person

        // Update the display
        function updateDisplay() {
            quantityDisplay.textContent = `${quantity} ${quantity === 1 ? 'item' : 'items'}`;
            decreaseBtn.disabled = quantity === 1;          // Disable minus if 1
            increaseBtn.disabled = quantity === maxQuantity; // Disable plus if max reached
        }

        // Decrease button click
        decreaseBtn.addEventListener('click', function() {
            if (quantity > 1) {
                quantity--;
                updateDisplay();
            }
        });

        // Increase button click
        increaseBtn.addEventListener('click', function() {
            if (quantity < maxQuantity) {
                quantity++;
                updateDisplay();
            }
        });

        // Initialize
        updateDisplay();

    });
</script>
{% endblock extra_script %}